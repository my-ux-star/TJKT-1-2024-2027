<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>KELAS TKJ 1 ANGKATAN 2024‚Äì2027</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>

html, body {
  width: 100%;
  height: 100%;
}

  * { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins',sans-serif; }
  body {
  min-height: 100vh;
  width: 100vw;
  overflow-x: hidden;

  display: flex;
  flex-direction: column;

  background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color: #fff;
}

  header { text-align:center; padding:40px 20px; position:relative; }
  h1 { font-size:2.4rem; }
  .logo { width:90px; margin-bottom:15px; }
  @media(max-width:600px){ h1{ font-size:1.8rem; } .logo{ width:70px; } }
  section {
  flex: 1;
  width: 100%;
  padding: 20px 15px;
  max-width: 1200px;
  margin: 0 auto;
}
  
/* Slider Beranda 4:3 */
.slider {
  width: 100%;
  aspect-ratio: 4 / 3; /* proporsi 4:3 */
  min-height: 300px;   /* tinggi minimal */
  max-height: 500px;   /* tinggi maksimal agar tidak terlalu besar di desktop */
  position: relative;
  overflow: hidden;
  border-radius: 20px;
  border: 3px solid rgba(255,255,255,0.55);
  box-shadow:
    0 12px 35px rgba(0,0,0,0.6),
    inset 0 0 25px rgba(255,255,255,0.15);
}

.slide {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;      /* tetap cover */
  border-radius: 20px;
  transform: translateX(100%);
  opacity: 0;
  transition: transform .6s ease, opacity .6s ease;
}

  .page { display:none; animation:fade .4s ease; }
  @keyframes fade { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
  ..anggota {
  display: flex; /* pakai flex, bukan grid */
  gap: 20px;
  overflow-x: auto; /* scroll horizontal */
  padding-bottom: 10px;
  scroll-behavior: smooth;
}

.anggota::-webkit-scrollbar {
  height: 8px; /* scroll bar horizontal */
}

.anggota::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.3);
  border-radius: 4px;
}

.anggota::-webkit-scrollbar-track {
  background: rgba(255,255,255,0.1);
}
.anggota {
  display: flex;
  gap: 15px;
  padding: 15px 10px;
  overflow-x: auto;
  scroll-behavior: smooth;
  max-width: 100%;
}
/* Box Anggota */
.anggota .box {
  flex: 0 0 min(35vw, 320px); /* lebar minimal 35% viewport, maksimal 320px */
  height: auto;               /* tinggi mengikuti konten */
  padding: 15px;
  border-radius: 15px;
  text-align: center;
  cursor: pointer;
  transition: .3s;
  background: rgba(255,255,255,.15);
}

/* Box Hover */
.anggota .box:hover { 
  background: rgba(255,255,255,.35); 
  transform: translateY(-5px); 
}

/* Box Profil Media */
.profile-media {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  margin: 20px auto;
  text-align: center;
  flex-direction: row; /* lebar, bukan tinggi */
  gap: 20px;           /* spasi antar media */
}

.profile-media img,
.profile-media video {
  width: min(35vw, 280px);  /* lebar proporsional */
  height: auto;             /* tinggi mengikuti lebar */
  border-radius: 20px;
  object-fit: cover;
}
  .box {
  flex: 0 0 180px; /* lebar tetap untuk scroll horizontal */
  background: rgba(255,255,255,.15);
  padding: 15px;
  border-radius: 15px;
  text-align: center;
  cursor: pointer;
  transition: .3s;
}
  .box:hover { background:rgba(255,255,255,.35); transform:translateY(-5px); }

  /* MENU TITIK TIGA */
  .menu-btn { position:absolute; top:25px; right:25px; font-size:30px; cursor:pointer; user-select:none; }
  .dropdown { position:absolute; top:70px; right:25px; background:rgba(0,0,0,.8); border-radius:15px; display:none; overflow:hidden; min-width:180px; z-index:999; }
  .dropdown div { padding:14px 20px; cursor:pointer; }
  .dropdown div:hover { background:rgba(255,255,255,.2); }

  /* Struktur Organisasi */
  .stat { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:20px; }
  .bagan { display:flex; flex-direction:column; align-items:center; gap:25px; margin-top:30px; }
  .level { display:flex; gap:20px; flex-wrap:wrap; justify-content:center; }
  .node { background:rgba(255,255,255,.18); padding:15px 20px; border-radius:15px; min-width:180px; text-align:center; box-shadow:0 6px 20px rgba(0,0,0,.3); position:relative; }
  .node small { opacity:.8; font-size:.85rem; }
  .kepala { background:linear-gradient(135deg,#00c6ff,#0072ff); font-weight:600; }

  /* Profile Media */
  .foto-profile { width:140px; height:140px; border-radius:50%; object-fit:cover; margin:0 auto 15px; display:block; border:4px solid rgba(255,255,255,.4); box-shadow:0 8px 20px rgba(0,0,0,.4); }
  .profile-media img,
.profile-media video {
  width: min(80vw, 260px);
  height: min(80vw, 260px);
  border-radius: 50%;
  object-fit: cover;

  border: 4px solid rgba(255,255,255,0.55);
  outline: 3px solid rgba(255,255,255,0.15);

  box-shadow:
    0 12px 35px rgba(0,0,0,0.55),
    inset 0 0 15px rgba(255,255,255,0.2);

  transition: transform 0.3s ease;
}

.profile-media img:active,
.profile-media video:active {
  transform: scale(0.97);
}
.profile-media {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  margin: 20px auto;
  text-align: row;
}
.profile-media img,
.profile-media video {
  display: block;
  margin: 0 auto;
}

.slider-video {
  width: min(85vw, 300px);
  height: min(85vw, 300px);
}

.slider {
  height: min(40vh, 250px); /* lebih tinggi dari default 200px */
}
  /* Slider Video */
  .slider-video { position: relative; width: 260px; height: 260px; margin: 0 auto; overflow: hidden; border-radius: 20px; }
  .slider-video {
  margin: 20px auto;
  display: flex;
  justify-content: center;
  align-items: center;
}
  .video-slide {
  position:absolute;
  top:0;
  left:100%;
  width:100%;
  height:100%;
  transition:transform 0.4s ease;
}

.video-slide.active {
  transform:translateX(-100%);
}

.video-slide.prev {
  transform:translateX(-200%);
}

.gif-video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 18px;
}

  /* Fullscreen */
  .fullscreen { position:fixed; inset:0; background:rgba(0,0,0,.9); display:flex; justify-content:center; align-items:center; z-index:9999; }
  .fullscreen img, .fullscreen video{ max-width:90%; max-height:90%; border-radius:15px; }

  /* Video Indicators */
  .video-indicators .dot { display:inline-block; width:10px; height:10px; margin:0 5px; background:#ccc; border-radius:50%; cursor:pointer; }
  .video-indicators .dot.active { background:#fff; }
  
  @media (max-width: 480px) {
  .profile-media img,
  .profile-media video {
    width: 75vw;
    height: 75vw;
  }

  .slider-video {
    width: 85vw;
    height: 85vw;
  }
}
.card {
  width: 100%;
  margin-bottom: 20px;

  background: rgba(255,255,255,.12);
  backdrop-filter: blur(10px);
  border-radius: 18px;
  padding: 20px;

  box-shadow: 0 8px 25px rgba(0,0,0,.3);
}
.slider {
  width: 100%;
  aspect-ratio: 16 / 9; /* bisa diubah misal 4/3 agar lebih tinggi */
  max-height: 400px;    /* batasi tinggi maksimal agar tidak terlalu besar */
  border: 3px solid rgba(255,255,255,0.55);
  box-shadow:
    0 12px 35px rgba(0,0,0,0.6),
    inset 0 0 25px rgba(255,255,255,0.15);
  border-radius: 20px;
}

footer {
  text-align: center;
  padding: 15px;
  font-size: 0.85rem;
  opacity: 0.8;

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
/* Profile Parallax Modern */
#profile {
  position: relative;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  transition:none;
}

/* Konten tetap di atas */
#profile > * {
  position: relative;
  z-index: 1;
}
/* BORDER FOTO & VIDEO PROFIL */
.profile-media img,
.profile-media video {
  border: 4px solid rgba(255,255,255,0.75);
  outline: 3px solid rgba(255,255,255,0.25);

  box-shadow:
    0 0 0 6px rgba(255,255,255,0.08),
    0 12px 35px rgba(0,0,0,0.6);

  background: rgba(255,255,255,0.05);
}
/* BORDER SLIDER VIDEO PROFIL */
.slider-video {
  border: 3px solid rgba(255,255,255,0.6);
  box-shadow:
    0 10px 30px rgba(0,0,0,0.6),
    inset 0 0 20px rgba(255,255,255,0.15);
}
/* BORDER FOTO BERANDA */
.slider {
  border: 3px solid rgba(255,255,255,0.55);
  box-shadow:
    0 12px 35px rgba(0,0,0,0.6),
    inset 0 0 25px rgba(255,255,255,0.15);
}
.slide {
  border-radius: 20px;
}
/* ===== TIKTOK STYLE FEED ===== */
/* FULLSCREEN TIKTOK MODE */
/* ===== TIKTOK FEED MODE CARD (BUKAN FULLSCREEN) ===== */
.tiktok-feed{
  position: relative;
  width: 100%;
  max-width: 420px;

  height: 70vh;
  padding: 0;              /* ‚ùó HILANGKAN PADDING */
  margin: 20px auto;

  overflow-y: auto;
  scroll-snap-type: y mandatory;

  border-radius: 20px;
  background: rgba(0,0,0,0.6);
}

.tiktok-item{
  position: relative;
  width: 100%;
  height: 70vh;            /* ‚ùó SAMA DENGAN FEED */
  scroll-snap-align: center;

  margin: 0;               /* ‚ùó HAPUS JARAK */
  border-radius: 20px;
  overflow: hidden;

  background: #000;
}
/* ===== BORDER BERANDA TIKTOK ===== */
.tiktok-feed{
  border: 3px solid rgba(255,255,255,0.55);
  box-shadow:
    0 12px 35px rgba(0,0,0,0.65),
    inset 0 0 25px rgba(255,255,255,0.15);
}
.tiktok-item{
  border: 2px solid rgba(255,255,255,0.25);
  box-shadow:
    inset 0 0 15px rgba(255,255,255,0.1),
    0 8px 25px rgba(0,0,0,0.6);
}

.tiktok-item video{
  position: absolute;
  inset: 0;

  width: 100%;
  height: 100%;

  object-fit: cover;    /* mirip TikTok asli */
}
.tiktok-item{
  background: radial-gradient(circle at center, #111, #000);
}

/* info video */
.tiktok-info{
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;

  padding: 14px;
  background: linear-gradient(
    to top,
    rgba(0,0,0,0.7),
    transparent
  );

  z-index: 5;
}

.tiktok-info b{
  font-size: 1rem;
}

.tiktok-item video:not([muted]){
  outline: 3px solid rgba(0,255,255,0.45);
  outline-offset: -3px;
}

.mute-icon{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%) scale(0.9);

  width:70px;
  height:70px;
  border-radius:50%;

  background:rgba(0,0,0,.6);
  backdrop-filter:blur(6px);

  opacity:0;
  transition:.3s;
  pointer-events:none;

  display:flex;
  align-items:center;
  justify-content:center;
}

.mute-icon::before{
  content:'';
  width:32px;
  height:32px;
  background-size:contain;
  background-repeat:no-repeat;
}

/* MUTE */
video[muted] + .mute-icon{
  opacity:1;
}
video[muted] + .mute-icon::before{
  background-image:url('mute.png');
}

/* SOUND ON */
video:not([muted]) + .mute-icon{
  opacity:.9;
}
video:not([muted]) + .mute-icon::before{
  background-image:url('sound.png');
}
</style>
</head>
<body>

<header>
  <img src="logo.png" alt="Logo Sekolah" class="logo">
  <h1>KELAS TKJ 1<br>ANGKATAN 2024‚Äì2027</h1>
  <p>Teknik Komputer dan Jaringan</p>

  <div class="menu-btn" id="menuBtn">‚ãÆ</div>
  <div class="dropdown" id="menu">
    <div data-page="home">beranda</div>
    <div data-page="about">tentang</div>
    <div data-page="wali">Wali Kelas</div>
    <div data-page="struktur">Struktur Kelas</div>
    <div data-page="anggota">Anggota Kelas</div>
    <div data-page="dashboard">Dashboard</div>
    <div data-page="moment">Moment</div>
  </div>
</header>

<section>
  <div class="page" id="home">
  <div class="tiktok-feed" id="tiktokFeed"></div>
</div>

  <div class="card page" id="about">
  <h2>Selamat Datang di Kelas TKJ 1</h2>
  
  <p>
    Website resmi <b>KELAS TKJ 1 ANGKATAN 2024‚Äì2027</b>.<br>
    Di sini kamu bisa melihat profil anggota kelas, struktur organisasi, momen kelas, dan dashboard statistik.
  </p>

    <!-- SLIDER FOTO -->
    <div class="slider">
      <img class="slide active" src="1.jpg">
      <img class="slide" src="2.jpg">
      <img class="slide" src="3.jpg">
    </div>

     <h3 style="margin-top:25px;">Sejarah Singkat Kelas</h3>
  <p>
    Kelas TKJ 1 dibentuk pada tahun 2024, terdiri dari siswa-siswa yang memiliki minat di bidang Teknik Komputer dan Jaringan. 
    Selama 3 tahun ke depan, kelas ini berfokus pada pengembangan keterampilan IT, kolaborasi, dan kreativitas teknologi.
  </p>
  <h3>Visi & Misi Kelas</h3>
  <p><b>Visi:</b> Menjadi kelas yang unggul dalam teknologi dan berkarakter.</p>
  <p><b>Misi:</b></p>
  <ul>
    <li>Meningkatkan keterampilan komputer dan jaringan setiap siswa.</li>
    <li>Mendorong kerja sama tim dalam setiap kegiatan kelas.</li>
    <li>Menciptakan lingkungan belajar yang kreatif dan menyenangkan.</li>
  </ul>
    <h3>Motivasi Belajar</h3>
  <p>
    <i>"Belajar hari ini adalah bekal untuk masa depan." ‚Äì Septa Ibnu Shina, S.Pd</i><br>
    Setiap siswa didorong untuk terus mengeksplorasi, mencoba hal baru, dan tidak takut gagal.
  </p>
  </div>

  <div class="card page" id="wali">
    <h2>Wali Kelas</h2>
    <img src="wali.png" alt="Foto Wali Kelas" class="foto-profile">
    <h3>Septa Ibnu Shina, S.Pd</h3>
    <p style="margin-top:10px;line-height:1.8">
      <b>Mata Pelajaran:</b> Teknik Komputer & Jaringan<br>
      <b>Jenis Kelamin:</b> Laki-laki<br>
      <b>Motivasi:</b> 
      <i>"Belajar hari ini adalah bekal untuk masa depan."</i>
    </p>
  </div>

  <div class="card page" id="struktur">
    <h2>Bagan Struktur Organisasi Kelas</h2>
    <div class="bagan">
      <div class="node kepala">Wali Kelas<br><small>Septa Ibnu Shina, S.Pd</small></div>
      <div class="level">
        <div class="node">Ketua Kelas<br><small>VHINKY JULFIRA SUSANTO</small></div>
      </div>
      <div class="level">
        <div class="node">Wakil Ketua<br><small>INTAN HIKMATUL HAWA</small></div>
      </div>
      <div class="level">
        <div class="node">Sekretaris 1<br><small>Siswa 3</small></div>
        <div class="node">Sekretaris 2<br><small>Siswa 4</small></div>
      </div>
      <div class="level">
        <div class="node">Bendahara 1<br><small>Siswa 5</small></div>
        <div class="node">Bendahara 2<br><small>Siswa 6</small></div>
      </div>
      <div class="level">
        <div class="node">Sie Keamanan</div>
        <div class="node">Sie Kebersihan</div>
      </div>
    </div>
  </div>

  <div class="card page" id="anggota">
    <h2>Anggota Kelas</h2>
    <div class="anggota" id="listSiswa"></div>
  </div>

  <div class="card page" id="profile">
    <div id="profileMedia" class="profile-media"></div>
    <h2 id="profileName"></h2>
    <p id="profileInfo"></p>
    <div id="profileVideoWrapper" style="text-align:center;margin-top:20px"></div>
    <div class="box" onclick="navigate('anggota')"> Kembali</div>
  </div>

  <div class="card page" id="dashboard">
    <h2>Dashboard Kelas</h2>
    <div class="stat">
      <div class="box">Total Siswa<br><b id="total"></b></div>
      <div class="box">Laki-laki<br><b id="lk"></b></div>
      <div class="box">Perempuan<br><b id="pr"></b></div>
    </div>
  </div>

  <div class="card page" id="moment">
    <h2>Moment Kelas</h2>
    <div class="anggota">
      <div class="box">üì∏ Kegiatan Belajar</div>
      <div class="box">üéâ Acara Kelas</div>
      <div class="box">üèÜ Prestasi</div>
    </div>
  </div>
</section>

<footer>
  <p>By RIFALDI</p>
  <p>¬© 2025 Kelas TKJ 1 2024-2027</p>
</footer>

<script>
  /* ===== DATA SISWA (JSON) ===== */
const siswa=[
  {nama:'ADI PRASETIO',
  jk:'L',
  hobi:'Gaming',
  jabatan:'anggota',
  foto:'Adi.png'},
  {nama:'AHMAD AQWIYAN IFADA',
  jk:'L',
  hobi:'',
  jabatan:'anggota',
  foto:''},
  {nama:'AMELIA ISWATUL HAWA',
  jk:'P',
  hobi:'',
  jabatan:'anggota',
  foto:''},
  {nama:'ARIBATUL AFIFAH',
  jk:'P',
  hobi:'',
  jabatan:'anggota',
  foto:''},
  {nama:'AZZIZA URISTU Q.C.',
  jk:'P',
  hobi:'Berenang',
  jabatan:'anggota',
  foto:''},
  {nama:'DESCHA DWI ALFIANA',
  jk:'P',
  hobi:'',
  jabatan:'anggota',
  foto:''},
  {nama:'DEWI ANA PUTRI',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'ERICA FAJAR MARDANI',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'FANISAH INDRIYANI',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'FINA AFRILIYANI',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'HAFIDZA SALMA MAULIDA',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'HIFA SHEILA MEYLIANA',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'ILMA LUKYANATUL KAMILA',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'INTAN HIKMATUL HAWA',
  jk:'P',
  hobi:'',
  jabatan:'Wakil Ketua Kelas',
  foto:''},
  {nama:'LIA MILATUL KHUSNA',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'MAHRIN SHIERRA ATHIEFA HN',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'MELATI A',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'MIA LATIFAH',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'MUHAMMAD ARIF AJILLA',
  jk:'L',
  hobi:'HOREG',
  jabatan:'Anggota',
  foto:''},
  {nama:'MUHAMMAD ILHAM FAHRI',
  jk:'L',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'MUHAMMAD RIFALDI KURNIAWAN',
 jk:'L',
 hobi:'GAMING & CODING',
 jabatan:'Anggota',
 foto:'RIFALDI.png',
 bg:'RIFALDI.jpg',
 boxbg:'RIFALDIBOX.png',
 video:['RIFALDI.mp4','RIFALDI2.mp4','RIFALDI3.mp4'],
 sosmed:{
   ig:'https://www.instagram.com/m.rifaldi.k?igsh=MXF4a3h1MnlnaWU4eQ==',
   tiktok:'https://www.tiktok.com/@aldirifaldi72?_r=1&_d=e0b4j3d0fii3dl&sec_uid=MS4wLjABAAAA7pP-809uzILjLHQKEDuaKVAE0C7cwegfg0AzbFCsBv48LVVRt71jxWRpHzVj59Ro&share_author_id=6775300066237826050&sharer_language=id&source=h5_t&u_code=da3jjh8mbbckij&timestamp=1766065802&user_id=6775300066237826050&sec_user_id=MS4wLjABAAAA7pP-809uzILjLHQKEDuaKVAE0C7cwegfg0AzbFCsBv48LVVRt71jxWRpHzVj59Ro&item_author_type=1&utm_source=copy&utm_campaign=client_share&utm_medium=android&share_iid=7583665306935002901&share_link_id=e62c8df3-0a23-424f-af17-0dff68ec2512&share_app_id=1180&ugbiz_name=ACCOUNT&ug_btm=b8727%2Cb7360&social_share_type=5&enable_checksum=1',
   fb:'https://www.facebook.com/aldirifaldi.aldirifaldi.10'
 }
},
  {nama:'NAWA AZKIA',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'NOVIANA SARI',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'PINKAN AULIA RAHMA',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'PUTRI SARI KUSUMA HATI',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''
  },
  {nama:'RATNA LUTFIYANTI',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'RIRIN SWANTIKA DEWI',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'RIRIN YULIA SARI',
  jk:'P',
  hobi:'Nonton Anime',
  jabatan:'Anggota',
  foto:'ririny.png',video:['ririny.mp4']},
  {nama:'RIZKY WIJAYA',
  jk:'L',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'VHINKY JULFIRA SUSANTO',
  jk:'P',
  hobi:'',
  jabatan:'Ketua Kelas',
  foto:''},
  {nama:'VIRA NINDYA PUTRI',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'WIDA AYUNINGTIYAS',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'WITA SALISA',
  jk:'P',
  hobi:'Olahraga',
  jabatan:'Anggota',
  foto:''},
  {nama:'ZIDNA THUWBA KAMEELA',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''},
  {nama:'IQNA RAHMA MAULIDA',
  jk:'P',
  hobi:'',
  jabatan:'Anggota',
  foto:''}
];

const menuBtn=document.getElementById('menuBtn');
const menu=document.getElementById('menu');
const listSiswa=document.getElementById('listSiswa');
const total=document.getElementById('total');
const lk=document.getElementById('lk');
const pr=document.getElementById('pr');

let currentVideoIndex = 0;
let videoSlides = [];

function navigate(id){
  stopProfileVideo();
  document.querySelectorAll('.page').forEach(p=>p.style.display='none');
  const page=document.getElementById(id);
  if(page) page.style.display='block';
  location.hash=id;
  menu.style.display='none';
}

menuBtn.addEventListener('click',()=>{ menu.style.display = menu.style.display==='block'?'none':'block'; });
menu.querySelectorAll('div').forEach(item=>{ item.addEventListener('click',()=>navigate(item.dataset.page)); });

function loadSiswa(){
  listSiswa.innerHTML='';
  siswa.forEach(s=>{
    const div=document.createElement('div');
    div.className = 'box';
div.style.background = s.boxbg 
    ? `url('${s.boxbg}') center/cover no-repeat` 
    : ''; // jika kosong, pakai gradient default dari CSS

div.innerHTML = `
  <div style="width:60px;height:60px;border-radius:50%;overflow:hidden;margin:0 auto 8px">
    <img src="${s.foto || 'https://upload.wikimedia.org/wikipedia/commons/9/99/Sample_User_Icon.png'}" 
      style="width:100%;height:100%;object-fit:cover">
  </div>
  <b>${s.nama}</b><br>
  <small>${s.jabatan}</small>
`;
    div.onclick = ()=>showProfile(s);
    listSiswa.appendChild(div);
  });
  total.innerText=siswa.length;
  lk.innerText=siswa.filter(s=>s.jk==='L').length;
  pr.innerText=siswa.filter(s=>s.jk==='P').length;
}

function showProfile(s) {
  stopProfileVideo();
  const profilePage = document.getElementById('profile');

  // ===== BACKGROUND =====
  if (s.bg && s.bg.trim() !== '') {
    profilePage.style.backgroundImage = `url('${s.bg}')`;
    profilePage.style.backgroundSize = 'cover';
    profilePage.style.backgroundPosition = 'center';
    profilePage.dataset.bgimg = 'true'; // tandai ada bg
  } else {
    profilePage.style.backgroundImage = 'linear-gradient(135deg,#0f2027,#203a43,#2c5364)';
    profilePage.style.backgroundSize = 'cover';
    profilePage.style.backgroundPosition = 'center';
    profilePage.dataset.bgimg = ''; // hapus tanda parallax
  }

  // ===== MEDIA PROFILE =====
  document.getElementById('profileMedia').innerHTML = `
    <img src="${s.foto || 'https://upload.wikimedia.org/wikipedia/commons/9/99/Sample_User_Icon.png'}"
      onclick="openFullscreen(this)">
  `;

  document.getElementById('profileName').innerText = s.nama;
  document.getElementById('profileInfo').innerHTML = `
    <b>Jabatan:</b> ${s.jabatan}<br>
    <b>Jenis Kelamin:</b> ${s.jk}<br>
    <b>Hobi:</b> ${s.hobi || '-'}
  `;

  // ===== SOSIAL MEDIA =====
  let sosmedHTML = '';
  if(s.sosmed){
    sosmedHTML = '<div style="margin-top:15px; display:flex; justify-content:center; gap:15px">';
    if(s.sosmed.ig) sosmedHTML += `<a href="${s.sosmed.ig}" target="_blank"><img src="IG.png" style="width:64px;height:64px"></a>`;
    if(s.sosmed.tiktok) sosmedHTML += `<a href="${s.sosmed.tiktok}" target="_blank"><img src="TIKTOK.png" style="width:64px;height:64px"></a>`;
    if(s.sosmed.fb) sosmedHTML += `<a href="${s.sosmed.fb}" target="_blank"><img src="FB.png" style="width:64px;height:64px"></a>`;
    sosmedHTML += '</div>';
  }
  document.getElementById('profileInfo').innerHTML += sosmedHTML;

  // ===== VIDEO PROFILE =====
  const videoWrap = document.getElementById('profileVideoWrapper');
  if(s.video && s.video.length){
    videoWrap.innerHTML = `
      <div class="slider-video">
        ${s.video.map((v,i)=>`
          <div class="video-slide ${i===0?'active':''}">
            <video class="gif-video" autoplay loop muted playsinline>
              <source src="${v}" type="video/mp4">
            </video>
          </div>
        `).join('')}
      </div>
      <div class="video-indicators"></div>
    `;

    videoSlides = videoWrap.querySelectorAll('.video-slide');
    currentVideoIndex = 0;

    const indicators = videoWrap.querySelector('.video-indicators');
    indicators.innerHTML = s.video.map((_,i)=>`<span class="dot ${i===0?'active':''}" onclick="showVideo(${i})"></span>`).join('');

    const slider = videoWrap.querySelector('.slider-video');
    let startX=0,endX=0;
    slider.addEventListener('touchstart', e=>startX=e.touches[0].clientX);
    slider.addEventListener('touchend', e=>{
      endX=e.changedTouches[0].clientX;
      if(startX-endX>50) nextVideo();
      if(endX-startX>50) prevVideo();
    });

  } else {
    videoWrap.innerHTML='';
    videoSlides=[];
  }

  navigate('profile');
}

function showVideo(index){
  if(!videoSlides.length) return;

  videoSlides.forEach((slide,i)=>{
    slide.classList.remove('active','prev');

    if(i < index) slide.classList.add('prev');
    if(i === index) slide.classList.add('active');

    const vid = slide.querySelector('video');
    if(vid){
      if(i === index){
        vid.muted = false;
        vid.play();
      } else {
        vid.pause();
        vid.currentTime = 0;
        vid.muted = true;
      }
    }
  });

  currentVideoIndex = index;
  updateIndicators();
}

function nextVideo(){
  if(currentVideoIndex >= videoSlides.length - 1) return; // mentok kanan
  showVideo(currentVideoIndex + 1);
}

function prevVideo(){
  if(currentVideoIndex <= 0) return; // mentok kiri
  showVideo(currentVideoIndex - 1);
}

function updateIndicators(){
  document.querySelectorAll('.video-indicators .dot').forEach((dot,i)=>{
    dot.style.background = (i===currentVideoIndex?'#fff':'#ccc');
  });
}

function stopProfileVideo(){
  if(!videoSlides.length) return;
  videoSlides.forEach(sl=>{
    const vid = sl.querySelector('video');
    if(vid){ vid.pause(); vid.currentTime=0; vid.muted=true; }
  });
}

function openFullscreen(el){
  const fs=document.createElement('div');
  fs.className='fullscreen';
  const clone=el.cloneNode(true);
  if(clone.tagName==='VIDEO'){ clone.autoplay=true; clone.controls=true; clone.muted=false; }
  fs.appendChild(clone);
  fs.onclick=()=>fs.remove();
  document.body.appendChild(fs);
}

window.onload=()=>{
  loadSiswa();
  navigate(location.hash.replace('#','')||'home');
  
  // slider gambar beranda
 const slides = document.querySelectorAll('.slide');
let currentSlide = 0;

// tampilkan slide pertama
slides[0].style.transform = 'translateX(0)';
slides[0].style.opacity = '1';

setInterval(()=>{
  const prev = currentSlide;
  currentSlide = (currentSlide + 1) % slides.length;

  // slide lama keluar ke kiri
  slides[prev].style.transform = 'translateX(-100%)';
  slides[prev].style.opacity = '0';

  // slide baru masuk dari kanan
  slides[currentSlide].style.transform = 'translateX(0)';
  slides[currentSlide].style.opacity = '1';

  // reset slide lain
  slides.forEach((s,i)=>{
    if(i !== prev && i !== currentSlide){
      s.style.transform = 'translateX(100%)';
      s.style.opacity = '0';
    }
  });
},3000);
};
function loadTikTokFeed(){
  const feed = document.getElementById('tiktokFeed');
  feed.innerHTML = '';

  // ambil siswa yang punya video
  const videoSiswa = siswa.filter(s => s.video && s.video.length);

  // acak urutan
  videoSiswa.sort(() => Math.random() - 0.5);

  videoSiswa.forEach(s => {
    s.video.forEach(v => {
      const item = document.createElement('div');
      item.className = 'tiktok-item';

      item.innerHTML = `
  <video 
    src="${v}" 
    muted 
    autoplay 
    loop 
    playsinline
    onclick="toggleMute(this)">
  </video>

  <div class="mute-icon"></div>

  <div class="tiktok-info" onclick="openProfileFromFeed('${s.nama}')">
    <b>${s.nama}</b><br>
    <small>${s.jabatan}</small>
  </div>
`;

      feed.appendChild(item);
      enableFullscreenAutoplay();
    });
  });

  // autoplay hanya video yang terlihat
  const observer = new IntersectionObserver(entries=>{
    entries.forEach(e=>{
      const video = e.target.querySelector('video');
      if(e.isIntersecting){
        video.play();
      }else{
        video.pause();
        video.currentTime = 0;
      }
    });
  },{threshold:0.7});

  document.querySelectorAll('.tiktok-item').forEach(item=>{
    observer.observe(item);
  });
}
window.addEventListener('load', loadTikTokFeed);

// KLIK INFO = BUKA PROFIL SISWA
function openProfileFromFeed(nama){
  const s = siswa.find(x => x.nama === nama);
  if(s){
    showProfile(s);
  }
}
let currentSoundVideo = null;

// TAP VIDEO = PLAY + UNMUTE, MATIKAN VIDEO LAIN
function toggleMute(video){

  // jika video ini sedang mute ‚Üí aktifkan
  if(video.muted){
    // matikan semua video lain
    document.querySelectorAll('.tiktok-item video').forEach(v=>{
      v.muted = true;
      v.pause();
      v.currentTime = 0;
    });

    video.muted = false;
    video.play();
    currentSoundVideo = video;
  } 
  // jika sudah unmute ‚Üí mute lagi
  else {
    video.muted = true;
    video.pause();
    currentSoundVideo = null;
  }
}
function enableFullscreenAutoplay(){
  const observer = new IntersectionObserver(entries=>{
    entries.forEach(e=>{
      const video = e.target.querySelector('video');

      if(e.isIntersecting){
        video.play();
      }else{
        video.pause();
        video.currentTime = 0;
        video.muted = true;
      }
    });
  },{threshold:0.8});

  document.querySelectorAll('.tiktok-item').forEach(item=>{
    observer.observe(item);
  });
}
let tiktokScrollTimer = null;

const feed = document.querySelector('.tiktok-feed');

feed.addEventListener('scroll', () => {

  // reset timer tiap scroll
  clearTimeout(tiktokScrollTimer);

  tiktokScrollTimer = setTimeout(() => {
    centerClosestVideo();
  }, 60); // jeda setelah scroll berhenti
});

function centerClosestVideo(){

  const feedRect = feed.getBoundingClientRect();
  const feedCenter = feedRect.top + feedRect.height / 2;

  let closest = null;
  let closestDistance = Infinity;

  document.querySelectorAll('.tiktok-item').forEach(item => {

    const rect = item.getBoundingClientRect();
    const itemCenter = rect.top + rect.height / 2;

    const distance = Math.abs(feedCenter - itemCenter);

    if(distance < closestDistance){
      closestDistance = distance;
      closest = item;
    }
  });

  document.querySelectorAll('.tiktok-item video').forEach(v=>{
    v.pause();
  });

  if(closest){
    const video = closest.querySelector('video');
    if(video){
      video.play();
    }

    feed.scrollTo({
      top: closest.offsetTop - feed.clientHeight/2 + closest.clientHeight/2,
      behavior: 'smooth'
    });
  }
}
</script>

</body>
</html>